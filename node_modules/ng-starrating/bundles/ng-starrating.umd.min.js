!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/forms"),require("@angular/common"),require("@angular/core"),require("rxjs")):"function"==typeof define&&define.amd?define("ng-starrating",["exports","@angular/forms","@angular/common","@angular/core","rxjs"],t):t(e["ng-starrating"]={},e.ng.forms,e.ng.common,e.ng.core,e.rxjs)}(this,function(e,t,n,a,s){"use strict";var r=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:a.Component,args:[{selector:"lib-rating",template:"\n    <p>\n      rating works!\n    </p>\n  "}]}],e.ctorParameters=function(){return[]},e}(),i=function(){function r(){var e=this;this.stars=[],this._readOnly=!1,this.rate=new a.EventEmitter,this.onValueChange||(this.onValueChange=new s.Subject,this.onValueChange.subscribe(function(){e.generateRating(),e.applySizeAllStars()})),this.onCheckedColorChange||(this.onCheckedColorChange=new s.Subject,this.onCheckedColorChange.subscribe(function(){e.applyColorStyleAllStars(!0)})),this.onUnCheckedColorChange||(this.onUnCheckedColorChange=new s.Subject,this.onUnCheckedColorChange.subscribe(function(){e.applyColorStyleAllStars(!1)})),this.onSizeChange||(this.onSizeChange=new s.Subject,this.onSizeChange.subscribe(function(){e.applySizeAllStars()})),this.onReadOnlyChange||(this.onReadOnlyChange=new s.Subject,this.onReadOnlyChange.subscribe(function(){e.addRemoveEvents()}))}return Object.defineProperty(r.prototype,"checkedcolor",{get:function(){return this._checkedColor},set:function(e){this._checkedColor=e,this._checkedColor&&this.onCheckedColorChange.next(this._checkedColor)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"uncheckedcolor",{get:function(){return this._unCheckedColor},set:function(e){this._unCheckedColor=e,this._unCheckedColor&&this.onUnCheckedColorChange.next(this._unCheckedColor)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"value",{get:function(){return this._value},set:function(e){e&&null!=e||(e=0),5<e&&(e=5),this._value=e,0<=this._value&&this.onValueChange.next(this._value)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){return this._size.concat(this._size.includes("px")?"":"px")},set:function(e){e&&null!=e&&"0px"!=e||(e="24px"),this._size=e,this.onSizeChange.next(this._size)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"readonly",{get:function(){return"true"===String(this._readOnly)},set:function(e){this._readOnly=e,this.onReadOnlyChange.next(e)},enumerable:!0,configurable:!0}),r.prototype.makeEditable=function(){var t=this;this.mainElement.nativeElement.addEventListener("mouseleave",this.offStar.bind(this)),this.mainElement.nativeElement.style.cursor="pointer",this.mainElement.nativeElement.title=this.value,this.stars.forEach(function(e){e.nativeElement.addEventListener("click",t.onRate.bind(t)),e.nativeElement.addEventListener("mouseenter",t.onStar.bind(t)),e.nativeElement.style.cursor="pointer",e.nativeElement.title=e.nativeElement.dataset.index})},r.prototype.makeReadOnly=function(){this.mainElement.nativeElement.__zone_symbol__mouseleavefalse=null,this.mainElement.nativeElement.style.cursor="default",this.mainElement.nativeElement.title=this.value,this.stars.forEach(function(e){e.nativeElement.__zone_symbol__clickfalse=null,e.nativeElement.__zone_symbol__mouseenterfalse=null,e.nativeElement.style.cursor="default",e.nativeElement.title=""})},r.prototype.addRemoveEvents=function(){this.readonly?this.makeReadOnly():(this.makeEditable(),this.onValueChange.next(this.value))},r.prototype.ngAfterViewInit=function(){},r.prototype.onRate=function(e){var t=e.srcElement,n=this.value;this.value=parseInt(t.dataset.index),0==this.value&&(this.value=1);var a={oldValue:n,newValue:this.value,starRating:this};this.rate.emit(a)},r.prototype.onStar=function(e){for(var t=e.srcElement,n=parseInt(t.dataset.index),a=0;a<n;a++)this.stars[a].nativeElement.classList=[],this.addDefaultClass(this.stars[a].nativeElement),this.addCheckedStarClass(this.stars[a].nativeElement);for(a=n;a<this.stars.length;a++)this.stars[a].nativeElement.classList=[],this.addDefaultClass(this.stars[a].nativeElement)},r.prototype.offStar=function(e){this.generateRating()},r.prototype.addDefaultClass=function(e){e.classList.add(r.CLS_DEFAULT_STAR)},r.prototype.addCheckedStarClass=function(e){e.classList.add(r.CLS_CHECKED_STAR)},r.prototype.addHalfStarClass=function(e){e.classList.add(r.CLS_HALF_STAR)},r.prototype.setStars=function(){0==this.stars.length&&(this.stars.push(this.star1Element),this.stars.push(this.star2Element),this.stars.push(this.star3Element),this.stars.push(this.star4Element),this.stars.push(this.star5Element))},r.prototype.applySizeAllStars=function(){var s=this;this._size&&this.stars.forEach(function(e){var t=s.size.match(/\d+/)[0],n=10*parseInt(t)/24,a=0-20*parseInt(t)/24;e.nativeElement.style.setProperty(r.VAR_SIZE,s.size),e.nativeElement.classList.contains(r.CLS_HALF_STAR)&&(e.nativeElement.style.setProperty(r.VAR_HALF_WIDTH,n+"px"),e.nativeElement.style.setProperty(r.VAR_HALF_MARGIN,a+"px"))})},r.prototype.applyColorStyleAllStars=function(t){var n=this;this.stars.forEach(function(e){t?n.applyCheckedColorStyle(e.nativeElement):n.applyUnCheckedColorStyle(e.nativeElement)})},r.prototype.applyColorStyle=function(e){this.applyCheckedColorStyle(e),this.applyUnCheckedColorStyle(e)},r.prototype.applyCheckedColorStyle=function(e){e.style.setProperty(r.VAR_CHECKED_COLOR,this.checkedcolor)},r.prototype.applyUnCheckedColorStyle=function(e){e.style.setProperty(r.VAR_UNCHECKED_COLOR,this.uncheckedcolor)},r.prototype.generateRating=function(){var t=this;if(!this.readonly&&(this.setStars(),0<=this.value)){this.mainElement.nativeElement.title=this.value;var n=!!(Number.parseFloat(this.value.toString())%1).toString().substring(3,2),a=1;this.stars.forEach(function(e){e.nativeElement.classList=[],t.applyColorStyle(e.nativeElement),t.addDefaultClass(e.nativeElement),t.value>=a?t.addCheckedStarClass(e.nativeElement):n&&(t.addHalfStarClass(e.nativeElement),n=!1),a++})}},r.VAR_CHECKED_COLOR="--checkedColor",r.VAR_UNCHECKED_COLOR="--unCheckedColor",r.VAR_SIZE="--size",r.VAR_HALF_WIDTH="--halfWidth",r.VAR_HALF_MARGIN="--halfMargin",r.CLS_CHECKED_STAR="on",r.CLS_DEFAULT_STAR="star",r.CLS_HALF_STAR="half",r.INP_CHECKED_COLOR="checkedcolor",r.INP_UNCHECKED_COLOR="uncheckedcolor",r.INP_VALUE="value",r.INP_SIZE="size",r.INP_READONLY="readonly",r.decorators=[{type:a.Component,args:[{selector:"star-rating",template:'\n  <div #starMain>\n    <span data-index="1" title="1" #star1></span>\n    <span data-index="2" title="2" #star2></span>\n    <span data-index="3" title="3" #star3></span>\n    <span data-index="4" title="4" #star4></span>\n    <span data-index="5" title="5" #star5></span>\n  </div>\n  <style>\n    :root {\n      --checkedColor: gold;\n      --unCheckedColor: gray;\n      --size: 24px;\n      --halfWidth: 10px;\n      --halfMargin: -20px;\n    }  \n    .star {\n      cursor: pointer;\n      color: var(--unCheckedColor);\n      font-size: var(--size);\n      width: var(--size);\n      display: inline-block;\n    }\n    .star:last-child {\n      margin-right: 0;\n    }\n    .star:before {\n      content:\'\\2605\';\n    }\n    .star.on {\n      color: var(--checkedColor);\n    }\n    .star.half:after {\n      content:\'\\2605\';\n      color: var(--checkedColor);\n      position: absolute;\n      margin-left: var(--halfMargin);\n      width: var(--halfWidth);\n      overflow: hidden;\n    }\n  </style>\n   '}]}],r.ctorParameters=function(){return[]},r.propDecorators={mainElement:[{type:a.ViewChild,args:["starMain"]}],star1Element:[{type:a.ViewChild,args:["star1"]}],star2Element:[{type:a.ViewChild,args:["star2"]}],star3Element:[{type:a.ViewChild,args:["star3"]}],star4Element:[{type:a.ViewChild,args:["star4"]}],star5Element:[{type:a.ViewChild,args:["star5"]}],rate:[{type:a.Output}],checkedcolor:[{type:a.Input,args:[r.INP_CHECKED_COLOR]}],uncheckedcolor:[{type:a.Input,args:[r.INP_UNCHECKED_COLOR]}],value:[{type:a.Input,args:[r.INP_VALUE]}],size:[{type:a.Input,args:[r.INP_SIZE]}],readonly:[{type:a.Input,args:[r.INP_READONLY]}]},r}(),o=function(){function e(){}return e.prototype.ngDoBootstrap=function(){},e.decorators=[{type:a.NgModule,args:[{imports:[t.FormsModule,n.CommonModule],declarations:[r,i],exports:[i],entryComponents:[i]}]}],e}();e.RatingModule=o,e.StarRatingComponent=i,e.Éµa=r,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng-starrating.umd.min.js.map